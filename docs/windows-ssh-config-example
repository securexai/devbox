# SSH Config Example for Multipass cloudops on Windows
# Location: C:\Users\s.tapia\.ssh\config
#
# Instructions:
# 1. Copy this file to C:\Users\s.tapia\.ssh\config (remove the -example suffix)
# 2. Update the HostName with your cloudops VM's IP address
# 3. Update the IdentityFile path if you use a different key location
# 4. Customize settings as needed for your environment

# Basic cloudops Configuration (Recommended)
Host cloudops
    HostName 172.29.10.254
    User cloudops
    Port 22
    IdentityFile C:\Users\s.tapia\.ssh\id_ed25519
    ForwardAgent yes
    ServerAliveInterval 60
    ServerAliveCountMax 3
    ConnectTimeout 10
    StrictHostKeyChecking accept-new
    UserKnownHostsFile C:\Users\s.tapia\.ssh\known_hosts

# Alternative: cloudops with Password Authentication
# Uncomment if you prefer password auth over SSH keys
#Host cloudops-password
#    HostName 172.29.10.254
#    User cloudops
#    Port 22
#    PreferredAuthentications password
#    ServerAliveInterval 60
#    ServerAliveCountMax 3

# Alternative: cloudops with Dynamic IP Resolution via Multipass
# Useful if VM IP changes frequently
# Requires: multipass and nc (netcat) in PATH
#Host cloudops-auto
#    HostName 172.29.10.254
#    User cloudops
#    Port 22
#    ProxyCommand multipass exec cloudops -- nc -q0 localhost 22
#    IdentityFile C:\Users\s.tapia\.ssh\id_ed25519
#    ForwardAgent yes

# cloudops with Port Forwarding
# Forwards common development ports from VM to Windows localhost
Host cloudops-ports
    HostName 172.29.10.254
    User cloudops
    Port 22
    IdentityFile C:\Users\s.tapia\.ssh\id_ed25519
    ForwardAgent yes
    ServerAliveInterval 60
    ServerAliveCountMax 3
    # Web development
    LocalForward 3000 localhost:3000
    LocalForward 8080 localhost:8080
    # Databases
    LocalForward 5432 localhost:5432  # PostgreSQL
    LocalForward 3306 localhost:3306  # MySQL
    LocalForward 6379 localhost:6379  # Redis
    LocalForward 27017 localhost:27017  # MongoDB

# Multiple cloudops Environments Example
#Host cloudops-prod
#    HostName 172.29.10.254
#    User cloudops
#    IdentityFile C:\Users\s.tapia\.ssh\id_ed25519
#    ForwardAgent yes
#
#Host cloudops-test
#    HostName 172.29.10.255
#    User cloudops
#    IdentityFile C:\Users\s.tapia\.ssh\id_ed25519
#    ForwardAgent yes

# Verbose/Debug Configuration
# Use this for troubleshooting connection issues
#Host cloudops-debug
#    HostName 172.29.10.254
#    User cloudops
#    Port 22
#    IdentityFile C:\Users\s.tapia\.ssh\id_ed25519
#    LogLevel DEBUG3
#    ServerAliveInterval 60

# Global Settings for All Hosts
# Uncomment and customize if needed
#Host *
#    ServerAliveInterval 60
#    ServerAliveCountMax 3
#    TCPKeepAlive yes
#    Compression yes
#    ControlMaster auto
#    ControlPath C:\Users\s.tapia\.ssh\sockets\%r@%h-%p
#    ControlPersist 600

# Configuration Options Explained:
#
# HostName           - IP address or hostname of the remote server
# User               - Username to log in as
# Port               - SSH port (default: 22)
# IdentityFile       - Path to private SSH key
# ForwardAgent       - Forward SSH keys to remote host (for Git operations)
# ServerAliveInterval - Send keepalive every N seconds to prevent timeout
# ServerAliveCountMax - Max number of keepalive retries before disconnect
# ConnectTimeout     - Timeout in seconds for initial connection
# StrictHostKeyChecking - How to handle unknown host keys
#   - yes: Always check, fail if key doesn't match
#   - no: Never check (insecure, not recommended)
#   - accept-new: Accept new keys, but verify existing ones
# LocalForward       - Forward local port to remote port (local:remote)
# ProxyCommand       - Command to establish connection (for advanced routing)
# LogLevel           - Verbosity: QUIET, FATAL, ERROR, INFO, VERBOSE, DEBUG, DEBUG1, DEBUG2, DEBUG3
# TCPKeepAlive       - Keep TCP connection alive at OS level
# Compression        - Enable SSH compression (useful on slow connections)
# ControlMaster      - Share multiple sessions over single connection
# ControlPath        - Socket file for ControlMaster
# ControlPersist     - Keep master connection open for N seconds after last session closes

# Common IdentityFile Locations on Windows:
# - Ed25519 key: C:\Users\s.tapia\.ssh\id_ed25519
# - RSA key: C:\Users\s.tapia\.ssh\id_rsa
# - ECDSA key: C:\Users\s.tapia\.ssh\id_ecdsa

# Tips:
# 1. Use Ed25519 keys for best security and performance
# 2. Enable ForwardAgent to use Windows SSH keys on the VM
# 3. Set ServerAliveInterval to prevent connection timeouts
# 4. Use LocalForward to access VM services from Windows
# 5. Create separate Host entries for different environments
# 6. Keep this file readable only by you (Windows handles this automatically)

# Quick Commands Reference:
# - Connect: ssh cloudops
# - Copy files to VM: scp file.txt cloudops:~/
# - Copy files from VM: scp cloudops:~/file.txt .
# - Run remote command: ssh cloudops "ls -la"
# - Create SSH tunnel: ssh -L 8080:localhost:8080 cloudops

# Troubleshooting:
# - Test connection: ssh -v cloudops (verbose output)
# - Very verbose: ssh -vvv cloudops
# - Check key: ssh-keygen -l -f C:\Users\s.tapia\.ssh\id_ed25519
# - List keys in agent: ssh-add -l
